<!DOCTYPE html>
<html class="arrow_box">
  <head>
    <meta charset="UTF-8">
    <link rel='stylesheet' href='stylesheets/fontawesome/css/fontawesome.min.css'>
    <link rel='stylesheet' href='stylesheets/semantic.min.css'>
    <link rel='stylesheet' href='stylesheets/application.css'>
  </head>
  <body>
   
    <header>
      <div id="webSearch">
        <!-- <div class="ui left action icon input fluid">
            <div class="ui basic floating dropdown button">
            <div class="text">This Page</div>
            <i class="dropdown icon"></i>
            <div class="menu">
              <div class="item">This Organization</div>
              <div class="item">Entire Site</div>
            </div>
          </div>
          <input type="text" id="website" placeholder="https://www.website.com/">
          <i class="fas fa-cog" style="margin-top: 12px;margin-left: -24px"></i>
          <i class="fas fa-search" style="margin-top: 12px;margin-left: -38px"></i>
        </div> -->


        <div class="ui action input loading fluid">
            <input type="text" placeholder="Website URL...">
            <div class="ui button">Search</div>
          </div>
      </div>
    </header>

    <div id="app" style="display: none">
      <div id="progress-list"></div>
    </div>


    <script>
      // Environment Variables from .env file
      require('dotenv').config()

      // Electron
      const { ipcRenderer, shell } = require('electron')
      const dialog = require('electron').remote.dialog
      const path = require('path')
      const fs = require('fs')
      const isDev = require('electron-is-dev')

      // Screenshots
      const puppeteer = require('puppeteer')
      function getChromiumExecPath() {
        return puppeteer.executablePath().replace('app.asar', 'app.asar.unpacked');
      }

      const browser =  puppeteer.launch({executablePath: getChromiumExecPath()});
      const nativeImage = require('electron').nativeImage

      // Load jQuery
      window.$ = window.jQuery = require('jquery')

      // Storage
      const Store = require('electron-store')
      const store = new Store()

      if (!store.get('myFolderPath')) {
        store.set('myFolderPath', dialog.showOpenDialog({ properties: ['openDirectory'] })[0]) 
      }
      const FOLDER_PATH = store.get('myFolderPath')

      fs.mkdir(`${FOLDER_PATH}/fullsize`, function (err) {})
      fs.mkdir(`${FOLDER_PATH}/thumbnails`, function (err) {})

      // Clear storage on test
      if (process.env.MOCHA) { // --> clear storage if tests
        store.clear()
      }

      // General Components
      const component = require(path.join(__dirname, 'javascripts/components'))

      // Views
      const example_view = fs.readFileSync(path.join(__dirname, 'views/example.html'), 'utf8')

      window.onblur = function() {
        // ipcRenderer.send('de-activated')
      }

      require('./renderer.js')
    </script>
  </body>
</html>
